# ============================================
# Zinnia 环境变量配置模板
# 复制此文件为 .env 并填入实际值
# ============================================

# 服务配置
APP_HOST=127.0.0.1
APP_PORT=8080
APP_ENV=development
RUST_LOG=info,zinnia=debug

# 数据库配置 (TimescaleDB)
DATABASE_URL=postgres://zinnia:your_password_here@localhost:5432/zinnia
# 额外用于 docker-compose 的环境变量
POSTGRES_USER=zinnia
POSTGRES_PASSWORD=your_password_here
POSTGRES_DB=zinnia
DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5

# Redis 配置
REDIS_URL=redis://:your_redis_password@localhost:6379/0
# 额外用于 docker-compose
REDIS_PASSWORD=your_redis_password

# 安全配置
JWT_SECRET=your_jwt_secret_key_at_least_256_bits_long_here
JWT_EXPIRY_SECONDS=900
REFRESH_TOKEN_EXPIRY_DAYS=7

# 加密密钥 (32 字节 / 256 位，Base64 编码)
ENCRYPTION_KEY=your_base64_encoded_32_byte_key_here

# 限流配置
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10

# 管理员 IP 白名单 (逗号分隔)
ADMIN_IP_WHITELIST=127.0.0.1,10.0.0.0/8

# ============================================
# SMTP 邮件服务配置
# ============================================
ZINNIA_SMTP__ENABLED=true
ZINNIA_SMTP__HOST=example.smtp.com
ZINNIA_SMTP__PORT=465
ZINNIA_SMTP__USERNAME=your_username
SMTP_PASSWORD=your_password
ZINNIA_SMTP__FROM_EMAIL=example@mail.com
ZINNIA_SMTP__FROM_NAME=zinnia
# 是否使用 TLS (true/false)
ZINNIA_SMTP__TLS=true
# 验证码有效期（秒）
ZINNIA_SMTP__CODE_EXPIRY_SECONDS=600
# 每小时每邮箱最大发送次数
ZINNIA_SMTP__MAX_SENDS_PER_HOUR=30

# ============================================
# Google reCAPTCHA v2 配置
# ============================================
ZINNIA_RECAPTCHA__ENABLED=true
# 从 https://www.google.com/recaptcha/admin 获取
ZINNIA_RECAPTCHA_SITE_KEY=your_recaptcha_site_key_here
RECAPTCHA_SECRET_KEY=your_recaptcha_secret_key_here
# 验证分数阈值 (0.0 - 1.0，仅 v3 使用)
ZINNIA_RECAPTCHA__SCORE_THRESHOLD=0.5

# ============================================
# 注册安全配置
# ============================================
# 同一 IP 每小时最大注册次数
ZINNIA_REGISTRATION__MAX_PER_IP_PER_HOUR=2
# 同一 IP 每天最大注册次数
ZINNIA_REGISTRATION__MAX_PER_IP_PER_DAY=5
# 是否强制要求邮箱验证
ZINNIA_REGISTRATION__REQUIRE_EMAIL_VERIFICATION=true
# 是否强制要求 reCAPTCHA
ZINNIA_REGISTRATION__REQUIRE_RECAPTCHA=true

# ============================================
# Web Push (PWA) 通知配置
# ============================================
# VAPID 密钥用于 Web Push 身份验证
# 生成方法：npx web-push generate-vapid-keys
# 或使用：./scripts/generate-vapid-keys.sh
VAPID_PUBLIC_KEY=your_vapid_public_key_here
VAPID_PRIVATE_KEY=your_vapid_private_key_here