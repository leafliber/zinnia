# Zinnia 环境变量配置参考
# =====================================
# 所有配置现已通过环境变量管理，不再依赖 config/*.toml 文件
# 复制此文件为 .env 并根据需要修改
# =====================================

# ============================================
# 应用环境
# ============================================
APP_ENV=development
RUST_LOG=info,zinnia=debug
RUST_BACKTRACE=1

# ============================================
# 服务器配置
# ============================================
ZINNIA_SERVER__HOST=127.0.0.1
ZINNIA_SERVER__PORT=8080
ZINNIA_SERVER__WORKERS=4

# ============================================
# 数据库配置 (TimescaleDB)
# ============================================
DATABASE_URL=postgres://zinnia:your_password@localhost:5432/zinnia
# 连接池配置
ZINNIA_DATABASE__MAX_CONNECTIONS=10
ZINNIA_DATABASE__MIN_CONNECTIONS=2
ZINNIA_DATABASE__CONNECT_TIMEOUT_SECONDS=30
ZINNIA_DATABASE__IDLE_TIMEOUT_SECONDS=600
ZINNIA_DATABASE__REQUIRE_SSL=false

# Docker Compose 使用
POSTGRES_USER=zinnia
POSTGRES_PASSWORD=your_password
POSTGRES_DB=zinnia

# ============================================
# Redis 配置
# ============================================
REDIS_URL=redis://:your_redis_password@localhost:6379/0
ZINNIA_REDIS__POOL_SIZE=10
ZINNIA_REDIS__CONNECT_TIMEOUT_SECONDS=5

# Docker Compose 使用
REDIS_PASSWORD=your_redis_password

# ============================================
# 安全配置
# ============================================
JWT_SECRET=your_jwt_secret_here_base64_encoded
ENCRYPTION_KEY=your_encryption_key_here_base64_encoded

# JWT 配置
ZINNIA_JWT__EXPIRY_SECONDS=900
ZINNIA_JWT__REFRESH_EXPIRY_DAYS=7
ZINNIA_JWT__ISSUER=zinnia-dev
ZINNIA_JWT__AUDIENCE=zinnia-api

# ============================================
# 限流配置
# ============================================
ZINNIA_RATE_LIMIT__REQUESTS_PER_MINUTE=60
ZINNIA_RATE_LIMIT__BURST_SIZE=10
ZINNIA_RATE_LIMIT__LOGIN_ATTEMPTS_PER_MINUTE=10

# ============================================
# 日志配置
# ============================================
ZINNIA_LOGGING__LEVEL=debug
ZINNIA_LOGGING__FORMAT=pretty  # pretty | json

# ============================================
# SMTP 邮件服务配置
# ============================================
ZINNIA_SMTP__ENABLED=false
ZINNIA_SMTP__HOST=smtp.example.com
ZINNIA_SMTP__PORT=465
ZINNIA_SMTP__USERNAME=your_email@example.com
SMTP_PASSWORD=your_smtp_password
ZINNIA_SMTP__FROM_EMAIL=noreply@example.com
ZINNIA_SMTP__FROM_NAME=Zinnia
ZINNIA_SMTP__TLS=true
ZINNIA_SMTP__CODE_EXPIRY_SECONDS=600
ZINNIA_SMTP__MAX_SENDS_PER_HOUR=30

# ============================================
# Google reCAPTCHA 配置
# ============================================
ZINNIA_RECAPTCHA__ENABLED=false
ZINNIA_RECAPTCHA_SITE_KEY=your_site_key
RECAPTCHA_SECRET_KEY=your_secret_key
ZINNIA_RECAPTCHA__SCORE_THRESHOLD=0.5

# ============================================
# 注册安全配置
# ============================================
ZINNIA_REGISTRATION__MAX_PER_IP_PER_HOUR=5
ZINNIA_REGISTRATION__MAX_PER_IP_PER_DAY=10
ZINNIA_REGISTRATION__REQUIRE_EMAIL_VERIFICATION=true
ZINNIA_REGISTRATION__REQUIRE_RECAPTCHA=true

# ============================================
# Docker 配置（仅用于 docker-compose）
# ============================================
DOCKER_REGISTRY=
IMAGE_TAG=latest
DOMAIN=localhost
SSL_EMAIL=

# ============================================
# 配置说明
# ============================================
# 1. 所有 ZINNIA_* 前缀的变量会覆盖应用内的默认配置
# 2. DATABASE_URL、REDIS_URL 等是直接使用的环境变量
# 3. 生产环境请使用强随机密码
# 4. 使用 __ 作为配置层级分隔符，例如：
#    ZINNIA_SERVER__HOST 对应配置中的 server.host
